<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Posts details</title>
</head>
<body>

<script>
    const postId = new URL(location.href).searchParams.get('PostId')
    const userId = new URL(location.href).searchParams.get('UserId')



    function postsDetails(){
        fetch(`https://jsonplaceholder.typicode.com/users/${userId}/posts`)
            .then(posts=>posts.json())
            .then(posts =>{
                    for (const i in posts) {
                        const infoPost=posts[i]
                        if (infoPost.id.toString() === postId){
                            for (const infoPostKey in infoPost) {
                                const div = document.createElement("div");
                                div.innerText = `${infoPostKey}: ${infoPost[infoPostKey]}`
                                document.body.appendChild(div);
                            }
                        }
                    }
                    const button = document.createElement("button");
                    button.innerText = 'Comments'
                    document.body.appendChild(button)
                    button.onclick =()=> getComments()


                }
            )
    }


    function getComments (){
        fetch(`https://jsonplaceholder.typicode.com/posts/${postId}/comments`)
            .then(comments =>comments.json())
            .then(comments=>{
                for (const commentsKey in comments) {
                    createStructure(comments[commentsKey]);
                }

            })


    }

    function createStructure (comment) {
        const ul = document.createElement('ul');
        document.body.appendChild(ul)
        for (const commentKey in comment) {
            const li = document.createElement('li');
            ul.appendChild(li);
            li.innerText = `${commentKey} : ${comment[commentKey]}`
        }



    }


    postsDetails();


</script>

</body>
</html>
